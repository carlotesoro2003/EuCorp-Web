import{c as Y,a as p,t as g,b as lt}from"../chunks/disclose-version.CM6f1PTD.js";import{p as ct,f as H,g as t,a as dt,b as f,s as d,c,r,t as X,d as j,i as Pt}from"../chunks/runtime.g0my00JR.js";import{e as N}from"../chunks/utils.sCj8HAia.js";import{i as w}from"../chunks/if.DVEvk735.js";import{s as gt}from"../chunks/class.tYA33czU.js";import{i as pt}from"../chunks/lifecycle.6aQbxLMK.js";import{p as Et}from"../chunks/props.BjMJLEAs.js";import{s as Q}from"../chunks/supabaseClient.CaMOPPuz.js";import{s as S}from"../chunks/render.pmuW5QOO.js";import{e as vt,i as ut}from"../chunks/each.BeKM084r.js";import{o as _t}from"../chunks/index-client.v1G0sw0w.js";import{E as bt,a as Nt}from"../chunks/jspdf.plugin.autotable.4s0l0uhg.js";import{a as xt}from"../chunks/attributes.BVavg5V5.js";import{r as yt}from"../chunks/misc.CY9ixZp3.js";import{a as wt}from"../chunks/axios.CCb-kr4I.js";import{s as Ot,a as Mt}from"../chunks/store.6LPOOnpP.js";/* empty css                         */import{w as Dt,g as zt}from"../chunks/index.C34d6m6q.js";var Lt=g('<div class="text-center text-xl"><span class="loading loading-spinner loading-md"></span> Loading...</div>'),Rt=g('<tr class="hover border-b"><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td></tr>'),Ct=g('<div class="overflow-x-auto shadow-lg rounded-lg"><table class="table-auto w-full text-left text-sm border-collapse"><thead class="uppercase text-xs"><tr><th class="px-4 py-3">Actions Taken</th><th class="px-4 py-3">KPI</th><th class="px-4 py-3">Evaluation</th><th class="px-4 py-3">Statement</th><th class="px-4 py-3">Status</th><th class="px-4 py-3">Time Completed</th></tr></thead><tbody></tbody></table></div>'),Tt=g("<div>No plans found for this filter.</div>"),jt=g('<div class="min-h-screen p-8 bg-base-300"><h1 class="text-3xl font-bold mb-6">Plans Monitoring</h1> <div class="flex space-x-4 mb-4"><button class="btn btn-primary svelte-1tziaei">Show All</button> <button class="btn btn-success svelte-1tziaei">Show Achieved</button> <button class="btn btn-error svelte-1tziaei">Show Not Achieved</button> <button class="btn btn-secondary ml-auto svelte-1tziaei">Export to PDF</button></div> <!></div>');function Ft(q,F){ct(F,!1);let b=[],k=j([]),A=j("all"),O=j(!0);const y=async()=>{f(O,!0);try{const{data:m,error:a}=await Q.from("plan_monitoring").select(`
            id,
            action_plan_id,
            evaluation,
            statement,
            is_accomplished,
            time_completed,
            action_plans (actions_taken, kpi)
          `);if(a){console.error("Error fetching plan monitoring:",a);return}b=m.map(i=>{var l,n;return{id:i.id,action_plan_id:i.action_plan_id,evaluation:i.evaluation,statement:i.statement,is_accomplished:i.is_accomplished,time_completed:i.time_completed,actions_taken:((l=i.action_plans)==null?void 0:l.actions_taken)||"No Actions Taken",kpi:((n=i.action_plans)==null?void 0:n.kpi)||"No KPI"}}),V()}catch(m){console.error("Error fetching data:",m)}finally{f(O,!1)}},V=()=>{t(A)==="all"?f(k,b):t(A)==="achieved"?f(k,b.filter(m=>m.is_accomplished)):t(A)==="not_achieved"&&f(k,b.filter(m=>!m.is_accomplished))},R=()=>{const m=new bt("landscape"),a="Plan Monitoring Report";m.setFontSize(12),m.text(a,14,15);const i=["Actions Taken","KPI","Evaluation","Statement","Status","Time Completed"],l=t(k).map(n=>[n.actions_taken,n.kpi,n.evaluation,n.statement,n.is_accomplished?"Achieved":"Not Achieved",n.time_completed?new Date(n.time_completed).toLocaleString():"N/A"]);Nt(m,{head:[i],body:l,startY:25,theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[41,128,185]}}),m.save("PlanMonitoring.pdf")};_t(async()=>{await y()}),pt();var K=jt(),C=d(c(K),2),U=c(C),I=d(U,2),G=d(I,2),W=d(G,2);r(C);var D=d(C,2);w(D,()=>t(O),m=>{var a=Lt();p(m,a)},m=>{var a=Y(),i=H(a);w(i,()=>t(k).length>0,l=>{var n=Ct(),_=c(n),h=d(c(_));vt(h,5,()=>t(k),ut,(v,e)=>{var s=Rt(),o=c(s),u=c(o,!0);r(o);var x=d(o),P=c(x,!0);r(x);var E=d(x),L=c(E,!0);r(E);var M=d(E),z=c(M,!0);r(M);var $=d(M),tt=c($,!0);r($);var T=d($),et=c(T,!0);X(()=>S(et,t(e).time_completed?new Date(t(e).time_completed).toLocaleString():"N/A")),r(T),r(s),X(()=>{S(u,t(e).actions_taken),S(P,t(e).kpi),S(L,t(e).evaluation||"Pending Evaluation"),S(z,t(e).statement||"Pending Statement"),S(tt,t(e).is_accomplished?"Achieved":"Not Achieved")}),p(v,s)}),r(h),r(_),r(n),p(l,n)},l=>{var n=Tt();p(l,n)},!0),p(m,a)}),r(K),N("click",U,()=>{f(A,"all"),V()}),N("click",I,()=>{f(A,"achieved"),V()}),N("click",G,()=>{f(A,"not_achieved"),V()}),N("click",W,R),p(q,K),dt()}var Kt=g("<h1>Risks Monitoring</h1>");function Ut(q){var F=Kt();p(q,F)}var qt=g('<div class="text-center"><span class="loading loading-spinner text-primary"></span> <p>Loading opportunities...</p></div>'),It=g('<tr class="hover"><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td></tr>'),Gt=g('<div class="overflow-x-auto shadow-lg rounded-lg"><table class="table-auto w-full text-left text-sm"><thead><tr><th class="px-4 py-3">Opportunity Statement</th><th class="px-4 py-3">KPI</th><th class="px-4 py-3">Planned Actions</th><th class="px-4 py-3">Evaluation</th><th class="px-4 py-3">Status</th><th class="px-4 py-3">Achieved On</th></tr></thead><tbody></tbody></table></div>'),$t=g('<div class="min-h-screen p-8"><h1 class="text-3xl font-bold mb-6">Opportunities Monitoring (Admin)</h1> <div class="flex space-x-4 mb-4"><button class="btn btn-primary svelte-1ll86zc">Show All</button> <button class="btn btn-success svelte-1ll86zc">Show Achieved</button> <button class="btn btn-error svelte-1ll86zc">Show Not Achieved</button> <button class="btn btn-secondary ml-auto svelte-1ll86zc">Export to PDF</button></div> <!></div>');function Yt(q,F){ct(F,!1);let b=[],k=j([]),A="All",O=j(!0);const y=async()=>{f(O,!0);const{data:a,error:i}=await Q.from("opt_monitoring").select(`
                opt_id,
                opportunities(opt_statement, kpi, planned_actions),
                evaluation,
                is_accomplished,
                time_completed
            `);if(i){console.error("Error fetching opportunities:",i);return}a&&(b=a.map(l=>({opt_id:l.opt_id,opt_statement:l.opportunities.opt_statement,kpi:l.opportunities.kpi,planned_actions:l.opportunities.planned_actions,evaluation:l.evaluation,achieved:l.is_accomplished,time_completed:l.time_completed})),V()),f(O,!1)},V=()=>{A==="Achieved"?f(k,b.filter(a=>a.achieved)):A==="Not Achieved"?f(k,b.filter(a=>!a.achieved)):f(k,b)},R=a=>{A=a,V()},K=()=>{const a=new bt("landscape"),i="Opportunities Monitoring Report";a.setFontSize(12),a.text(i,14,15);const l=["Opportunity Statement","KPI","Planned Actions","Evaluation","Status","Achieved On"],n=t(k).map(e=>[e.opt_statement,e.kpi,e.planned_actions,e.evaluation||"Pending",e.achieved?"Achieved":"Not Achieved",e.achieved&&e.time_completed?new Date(e.time_completed).toLocaleDateString():"N/A"]);let _=25;const h=10,v=[60,40,60,40,30,30];a.setFontSize(10),l.forEach((e,s)=>{a.rect(14+v.slice(0,s).reduce((o,u)=>o+u,0),_,v[s],h),a.text(e,14+v.slice(0,s).reduce((o,u)=>o+u,0)+2,_+7)}),_+=h,n.forEach(e=>{e.forEach((s,o)=>{a.rect(14+v.slice(0,o).reduce((u,x)=>u+x,0),_,v[o],8),a.text(s,14+v.slice(0,o).reduce((u,x)=>u+x,0)+2,_+5)}),_+=8}),a.save("OpportunitiesMonitoring.pdf")};_t(()=>{y()}),pt();var C=$t(),U=d(c(C),2),I=c(U),G=d(I,2),W=d(G,2),D=d(W,2);r(U);var m=d(U,2);w(m,()=>t(O),a=>{var i=qt();p(a,i)},a=>{var i=Gt(),l=c(i),n=d(c(l));vt(n,5,()=>t(k),ut,(_,h)=>{let v=()=>t(h).opt_statement,e=()=>t(h).kpi,s=()=>t(h).planned_actions,o=()=>t(h).evaluation,u=()=>t(h).achieved,x=()=>t(h).time_completed;var P=It(),E=c(P),L=c(E,!0);r(E);var M=d(E),z=c(M,!0);r(M);var $=d(M),tt=c($,!0);r($);var T=d($),et=c(T,!0);r(T);var at=d(T),ot=c(at,!0);r(at);var Z=d(at),rt=c(Z,!0);X(()=>S(rt,u()&&x()?new Date(x()).toLocaleDateString():"N/A")),r(Z),r(P),X(()=>{S(L,v()),S(z,e()),S(tt,s()),S(et,o()||"Pending"),S(ot,u()?"Achieved":"Not Achieved")}),p(_,P)}),r(n),r(l),r(i),p(a,i)}),r(C),N("click",I,()=>R("All")),N("click",G,()=>R("Achieved")),N("click",W,()=>R("Not Achieved")),N("click",D,K),p(q,C),dt()}var Ht=g('<div class="text-center text-xl"><span class="loading loading-spinner loading-md"></span></div>'),Vt=g('<button class="btn btn-primary btn-sm ml-2">View Statement</button>'),Wt=g('<tr class="hover border-b"><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td><td class="px-4 py-3"><textarea class="border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring focus:ring-indigo-200" placeholder="Enter actions taken..." style="overflow:hidden; resize:none;"></textarea></td><td class="px-4 py-3"><!></td><td class="px-4 py-3"><button class="btn btn-success btn-sm">Evaluate</button> <!></td></tr>'),Bt=g('<div class="overflow-x-auto shadow-lg rounded-lg"><table class="table-auto w-full text-left text-sm border-collapse"><thead class="uppercase text-xs"><tr><th class="px-4 py-3">Strategic Goal</th><th class="px-4 py-3">Objective Name</th><th class="px-4 py-3">Strategic Initiatives</th><th class="px-4 py-3">KPI</th><th class="px-4 py-3">Actions Taken to Achieve Action Plan</th><th class="px-4 py-3">Status</th><th class="px-4 py-3">Actions</th></tr></thead><tbody></tbody></table></div>'),Jt=g("<div>No action plans found for this user.</div>"),Qt=g('<div class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50"><div class="bg-white p-6 rounded-lg shadow-lg w-96"><h2 class="text-lg font-bold mb-4">Evaluation Statement</h2> <p class="mb-4"> </p> <button class="btn bg-indigo-500 hover:bg-indigo-600 text-white w-full">Close</button></div></div>'),Xt=g('<div class="min-h-screen p-8 bg-base-300"><h1 class="text-3xl font-bold mb-6">Plans Monitoring</h1> <!> <!></div>');function Zt(q,F){ct(F,!1);let b=j([]),k=null,A=j(!0),O=j(!1),y=j("");const V="http://localhost:3000/evaluate-goal",R=async()=>{const{data:{user:a}}=await Q.auth.getUser();a?k=a.id:console.error("No logged-in user found.")},K=async()=>{if(k)try{const{data:a,error:i}=await Q.from("action_plans").select(`
          id,
          actions_taken,
          kpi,
          objective_id,
          strategic_objectives (
            name,
            strategic_goals (name)
          )
        `).eq("profile_id",k);if(i){console.error("Error fetching action plans:",i);return}f(b,a.map(l=>{var n,_,h;return{id:l.id,actions_taken:l.actions_taken,kpi:l.kpi,objective_id:l.objective_id,strategic_goal_name:((_=(n=l.strategic_objectives)==null?void 0:n.strategic_goals)==null?void 0:_.name)||"No Goal Assigned",objective_name:((h=l.strategic_objectives)==null?void 0:h.name)||"No Objective Assigned",is_accomplished:!1,evaluation:null,statement:null,time_completed:null}})),await C()}catch(a){console.error("Error fetching data:",a)}finally{f(A,!1)}},C=async()=>{try{const{data:a,error:i}=await Q.from("plan_monitoring").select("action_plan_id, is_accomplished, evaluation, statement, time_completed").in("action_plan_id",t(b).map(l=>l.id));if(i){console.error("Error fetching monitoring data:",i);return}f(b,t(b).map(l=>{const n=a.find(_=>_.action_plan_id===l.id);return{...l,is_accomplished:(n==null?void 0:n.is_accomplished)||!1,evaluation:(n==null?void 0:n.evaluation)||null,statement:(n==null?void 0:n.statement)||null,time_completed:(n==null?void 0:n.time_completed)||null}})),console.log("Updated Action Plans with Monitoring Data:",t(b))}catch(a){console.error("Error fetching plan monitoring data:",a)}},U=async(a,i,l)=>{try{const _=(await wt.post(V,{target:i,evaluation:l})).data.aiEvaluation,v=!["not achieved","unsuccessful","failed","incomplete","fell short","below target","did not meet","not"].some(o=>_.toLowerCase().includes(o)),e=v?new Date().toISOString():null,{error:s}=await Q.from("plan_monitoring").update({evaluation:l,is_accomplished:v,statement:_,time_completed:e}).eq("action_plan_id",a);if(s){console.error("Error updating plan monitoring:",s);return}f(b,t(b).map(o=>o.id===a?{...o,is_accomplished:v,evaluation:l,statement:_,time_completed:e}:o))}catch(n){console.error("Error evaluating action plan:",n)}},I=a=>{f(y,a),f(O,!0)},G=a=>{const i=a.target;i.style.height="auto",i.style.height=`${i.scrollHeight}px`};_t(async()=>{await R(),await K()}),pt();var W=Xt(),D=d(c(W),2);w(D,()=>t(A),a=>{var i=Ht();p(a,i)},a=>{var i=Y(),l=H(i);w(l,()=>t(b).length>0,n=>{var _=Bt(),h=c(_),v=d(c(h));vt(v,5,()=>t(b),ut,(e,s)=>{var o=Wt(),u=c(o),x=c(u,!0);r(u);var P=d(u),E=c(P,!0);r(P);var L=d(P),M=c(L,!0);r(L);var z=d(L),$=c(z,!0);r(z);var tt=d(z),T=c(tt);yt(T),r(tt);var et=d(tt),at=c(et);w(at,()=>t(s).is_accomplished,B=>{var J=lt();X(()=>S(J,`Achieved on ${(t(s).time_completed?new Date(t(s).time_completed).toLocaleString():"N/A")??""}`)),p(B,J)},B=>{var J=lt("Not Achieved");p(B,J)}),r(et);var ot=d(et),Z=c(ot),rt=d(Z,2);w(rt,()=>t(s).statement,B=>{var J=Vt();N("click",J,()=>I(t(s).statement||"")),p(B,J)}),r(ot),r(o),X(()=>{S(x,t(s).strategic_goal_name),S(E,t(s).objective_name),S(M,t(s).actions_taken),S($,t(s).kpi),xt(T,t(s).evaluation),T.disabled=t(s).is_accomplished,Z.disabled=!t(s).evaluation||t(s).is_accomplished}),N("input",T,B=>{t(s).evaluation=B.target.value,Pt(()=>t(b)),G(B)}),N("click",Z,()=>U(t(s).id,t(s).kpi,t(s).evaluation||"")),p(e,o)}),r(v),r(h),r(_),p(n,_)},n=>{var _=Jt();p(n,_)},!0),p(a,i)});var m=d(D,2);w(m,()=>t(O),a=>{var i=Qt(),l=c(i),n=d(c(l),2),_=c(n,!0);r(n);var h=d(n,2);r(l),r(i),X(()=>S(_,t(y))),N("click",h,()=>f(O,!1)),p(a,i)}),r(W),p(q,W),dt()}var te=g("<h1>Risks  Monitoring</h1>");function ee(q){var F=te();p(q,F)}var ae=g('<span class="loading loading-spinner text-primary"></span>'),oe=g('<button class="btn btn-primary btn-sm ml-2">View Statement</button>'),se=g('<tr class="hover border-b"><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td><td class="px-4 py-3"><textarea class="border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring focus:ring-indigo-200" placeholder="Enter your evaluation" style="overflow:hidden; resize:none; min-width: 200px;"></textarea></td><td class="px-4 py-3"><!></td><td class="px-4 py-3"><button class="btn btn-success btn-sm">Evaluate</button> <!></td></tr>'),ie=g('<div class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50"><div class="bg-white p-6 rounded-lg shadow-lg w-96"><h2 class="text-lg font-bold mb-4">AI Evaluation Statement</h2> <p class="mb-4"> </p> <button class="btn bg-indigo-500 hover:bg-indigo-600 text-white w-full">Close</button></div></div>'),re=g('<div class="min-h-screen p-8"><h1 class="text-3xl font-bold mb-6">Mid-Year Opportunity Monitoring</h1> <button class="btn bg-indigo-500 hover:bg-indigo-600 text-white font-medium mb-6">Evaluate All Opportunities</button> <div class="overflow-x-auto shadow-lg rounded-lg"><table class="table-auto w-full text-left text-sm border-collapse"><thead class="uppercase text-xs"><tr><th class="px-4 py-3">Opportunity Statement</th><th class="px-4 py-3">Target (KPI)</th><th class="px-4 py-3">Evaluation</th><th class="px-4 py-3">Achieved</th><th class="px-4 py-3">Actions</th></tr></thead><tbody></tbody></table></div> <!></div>');function ne(q,F){ct(F,!1);const b=Ot(),k=()=>Mt(y,"$goals",b);let A=[],O=null,y=Dt([]);const V="http://localhost:3000/evaluate-goal";let R=j(!1),K=j("");function C(v){f(K,v),f(R,!0)}const U=async()=>{const{data:{session:v},error:e}=await Q.auth.getSession();if(e||!v){console.error("Error fetching session:",e);return}const{user:s}=v,{data:o,error:u}=await Q.from("profiles").select("id").eq("id",s.id).single();if(u||!o){console.error("Error fetching profile:",u);return}O=o.id},I=async()=>{if(!O)return;const{data:v,error:e}=await Q.from("opt_monitoring").select(`
                opt_id,
                time_completed,
                evaluation,
                statement,
                opportunities (opt_statement, kpi, planned_actions)
            `).eq("profile_id",O);if(e)console.error(e);else{A=v.map(o=>({opt_id:o.opt_id,opt_statement:o.opportunities.opt_statement,kpi:o.opportunities.kpi,planned_actions:o.opportunities.planned_actions,time_completed:o.time_completed,evaluation:o.evaluation||"",statement:o.statement||null}));const s=A.map(o=>({id:o.opt_id,statement:o.opt_statement,goal:o.kpi,evaluation:o.evaluation||"",achieved:o.time_completed?"Achieved":null,isLoading:!1,timeCompleted:o.time_completed,aiStatement:o.statement||null}));y.set(s)}};async function G(v,e,s){try{const u=(await wt.post(V,{target:e,evaluation:s})).data.aiEvaluation,P=!["not achieved","unsuccessful","failed","incomplete","fell short","below target","did not meet","not"].some(M=>u.toLowerCase().includes(M)),E=P?new Date().toISOString():null,{error:L}=await Q.from("opt_monitoring").update({time_completed:E,evaluation:s,statement:u,is_accomplished:P}).eq("opt_id",v);L?console.error("Error updating opt_monitoring:",L):y.update(M=>M.map(z=>z.id===v?{...z,achieved:P?"Achieved":"Not Achieved",isLoading:!1,timeCompleted:E,aiStatement:u}:z))}catch(o){console.error("Error evaluating goal:",o)}}async function W(){const v=zt(y);for(const e of v)e.goal&&e.evaluation&&await G(e.id,e.goal,e.evaluation)}function D(v,e,s){y.update(o=>o.map(u=>u.id===v?{...u,[e]:s}:u))}function m(v){const e=v.target;e.style.height="auto",e.style.width="auto",e.style.height=`${e.scrollHeight}px`,e.style.width=`${e.scrollWidth+20}px`}_t(async()=>{await U(),await I()}),pt();var a=re(),i=d(c(a),2),l=d(i,2),n=c(l),_=d(c(n));vt(_,5,k,ut,(v,e)=>{let s=()=>t(e).id,o=()=>t(e).statement,u=()=>t(e).goal,x=()=>t(e).evaluation,P=()=>t(e).achieved,E=()=>t(e).isLoading,L=()=>t(e).timeCompleted,M=()=>t(e).aiStatement;var z=se(),$=c(z),tt=c($,!0);r($);var T=d($),et=c(T,!0);r(T);var at=d(T),ot=c(at);yt(ot),r(at);var Z=d(at),rt=c(Z);w(rt,E,st=>{var it=ae();p(st,it)},st=>{var it=Y(),At=H(it);w(At,()=>P()==="Achieved",mt=>{var nt=lt();X(()=>S(nt,`Achieved on ${(L()?new Date(L()).toLocaleDateString():"N/A")??""}`)),p(mt,nt)},mt=>{var nt=Y(),St=H(nt);w(St,()=>P()==="Not Achieved",ht=>{var ft=lt("Not Achieved");p(ht,ft)},ht=>{var ft=lt("Pending");p(ht,ft)},!0),p(mt,nt)},!0),p(st,it)}),r(Z);var B=d(Z),J=c(B),kt=d(J,2);w(kt,M,st=>{var it=oe();N("click",it,()=>C(M())),p(st,it)}),r(B),r(z),X(()=>{S(tt,o()),S(et,u()),xt(ot,x()),ot.disabled=P()==="Achieved",J.disabled=!x()}),N("input",ot,st=>{D(s(),"evaluation",st.target.value),m(st)}),N("click",J,()=>G(s(),u(),x())),p(v,z)}),r(_),r(n),r(l);var h=d(l,2);w(h,()=>t(R),v=>{var e=ie(),s=c(e),o=d(c(s),2),u=c(o,!0);r(o);var x=d(o,2);r(s),r(e),X(()=>S(u,t(K))),N("click",x,()=>f(R,!1)),p(v,e)}),r(a),N("click",i,W),p(q,a),dt()}var le=g('<div class="text-center"><span class="loading loading-spinner loading-lg"></span> <p class="mt-2">Loading...</p></div>'),ce=g('<p class="text-white text-xl">You do not have the required permissions to view this page.</p>'),de=g('<p class="text-red-500 text-xl">Failed to load session or profile data.</p>'),pe=g('<div class="min-h-screen bg-base-300 p-8"><div role="tablist" class="tabs tabs-boxed"><a role="tab">Plans</a> <a role="tab">Risks</a> <a role="tab">Opportunities</a></div> <!></div>');function Me(q,F){ct(F,!1);let b=Et(F,"data",8,null),k=j(null),A=j(null),O=j(!0),y=j("Plans");(async()=>{var D;try{if((D=b())!=null&&D.session){f(k,b().session);const{user:m}=t(k),{data:a,error:i}=await Q.from("profiles").select("role").eq("id",m.id).single();i?console.error("Error fetching user profile:",i.message):(f(A,a),console.log("Role in Opportunities: ",t(A)))}else console.warn("Session is not available or data is missing.")}catch(m){console.error("Error fetching user profile or session:",m)}finally{f(O,!1)}})();const R=D=>{f(y,D)};pt();var K=pe(),C=c(K),U=c(C),I=d(U,2),G=d(I,2);r(C);var W=d(C,2);w(W,()=>t(O),D=>{var m=le();p(D,m)},D=>{var m=Y(),a=H(m);w(a,()=>t(k)!==null&&t(A),i=>{var l=Y(),n=H(l);w(n,()=>t(A).role==="admin",_=>{var h=Y(),v=H(h);w(v,()=>t(y)==="Plans",e=>{Ft(e,{})},e=>{var s=Y(),o=H(s);w(o,()=>t(y)==="Risks",u=>{Ut(u)},u=>{var x=Y(),P=H(x);w(P,()=>t(y)==="Opportunities",E=>{Yt(E,{})},null,!0),p(u,x)},!0),p(e,s)}),p(_,h)},_=>{var h=Y(),v=H(h);w(v,()=>t(A).role==="user",e=>{var s=Y(),o=H(s);w(o,()=>t(y)==="Plans",u=>{Zt(u,{})},u=>{var x=Y(),P=H(x);w(P,()=>t(y)==="Risks",E=>{ee(E)},E=>{var L=Y(),M=H(L);w(M,()=>t(y)==="Opportunities",z=>{ne(z,{})},null,!0),p(E,L)},!0),p(u,x)}),p(e,s)},e=>{var s=ce();p(e,s)},!0),p(_,h)}),p(i,l)},i=>{var l=de();p(i,l)},!0),p(D,m)}),r(K),X(()=>{gt(U,`tab ${(t(y)==="Plans"?"tab-active":"")??""}`),gt(I,`tab ${(t(y)==="Risks"?"tab-active":"")??""}`),gt(G,`tab ${(t(y)==="Opportunities"?"tab-active":"")??""}`)}),N("click",U,()=>R("Plans")),N("click",I,()=>R("Risks")),N("click",G,()=>R("Opportunities")),p(q,K),dt()}export{Me as component};
